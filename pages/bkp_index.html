<html ng-app="spellryt">

    <head>
    </head>

    <body>

        <div ng-controller="test">            

            <input type="button" value="Repeat" onclick="repeat();"/>

            <input type="text" placeholder="Type Text" id="value" />

            <input type="button" value="Check" onclick="check();"/>

        </div>

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular.min.js"></script>


        <script>

            var app = angular.module("spellryt", []);

            var currentWord;

            app.controller('test', function($scope, $http) {
                
                $http.get("http://localhost:9000/resources/a-series.json")
	                .then(function(response) {
		            var words = response.data.words;

                    var index = Math.floor(Math.random() * words.length);

                    var word = words[index];

                    $scope.word = word;

                    currentWord = word;

                    var msg = new SpeechSynthesisUtterance();
                    var voices = window.speechSynthesis.getVoices();
                    msg.voice = voices[2];
                    msg.rate = 10 / 10;
                    msg.pitch = 1;
                    msg.text = word;

                    msg.onend = function(e) {
                        console.log('Finished in ' + event.elapsedTime + ' seconds.');
                    };

                    speechSynthesis.speak(msg); 

	            });
                
            });

            function repeat() {

                var msg = new SpeechSynthesisUtterance();
                var voices = window.speechSynthesis.getVoices();
                msg.voice = voices[2];
                msg.rate = 10 / 10;
                msg.pitch = 1;
                msg.text = currentWord;

                msg.onend = function(e) {
                    console.log('Finished in ' + event.elapsedTime + ' seconds.');
                };

                speechSynthesis.speak(msg); 
            }

            function check() {

                if($('#value').val() == currentWord) {

                    alert("correct");
                } else {

                    alert("wrong");
                }

            }

        </script>

    </body>

</html>
